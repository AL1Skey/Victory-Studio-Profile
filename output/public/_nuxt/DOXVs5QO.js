(function(i){var L={showLogs:!1,round:1e3,init:function(){if(this._log("init"),this._inited){this._log("Already Inited"),this._inited=!0;return}this._requestAnimationFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(y,Z){window.setTimeout(y,16.666666666666668)}}(),this._onScroll(!0)},_inited:!1,_properties:["x","y","z","rotateX","rotateY","rotateZ","scaleX","scaleY","scaleZ","scale"],_requestAnimationFrame:null,_log:function(y){this.showLogs&&console.log("Parallax Scroll / "+y)},_onScroll:function(y){var Z=i(document).scrollTop(),M=i(window).height();this._log("onScroll "+Z),i("[data-parallax]").each(i.proxy(function(Q,S){var e=i(S),a=[],z=!1,A=e.data("style");A==null&&(A=e.attr("style")||"",e.data("style",A));var q=[e.data("parallax")],v;for(v=2;e.data("parallax"+v);v++)q.push(e.data("parallax-"+v));var F=q.length;for(v=0;v<F;v++){var d=q[v],s=d["from-scroll"];s==null&&(s=Math.max(0,i(S).offset().top-M)),s=s|0;var w=d.distance,h=d["to-scroll"];w==null&&h==null&&(w=M),w=Math.max(w|0,1);var u=d.easing,X=d["easing-return"];if((u==null||!i.easing||!i.easing[u])&&(u=null),(X==null||!i.easing||!i.easing[X])&&(X=u),u){var l=d.duration;l==null&&(l=w),l=Math.max(l|0,1);var b=d["duration-return"];b==null&&(b=l),w=1;var n=e.data("current-time");n==null&&(n=0)}h==null&&(h=s+w),h=h|0;var r=d.smoothness;r==null&&(r=30),r=r|0,(y||r==0)&&(r=1),r=r|0;var x=Z;x=Math.max(x,s),x=Math.min(x,h),u&&(e.data("sens")==null&&e.data("sens","back"),x>s&&(e.data("sens")=="back"?(n=1,e.data("sens","go")):n++),x<h&&(e.data("sens")=="go"?(n=1,e.data("sens","back")):n++),y&&(n=l),e.data("current-time",n)),this._properties.map(i.proxy(function(t){var c=0,f=d[t];if(f!=null){t=="scale"||t=="scaleX"||t=="scaleY"||t=="scaleZ"?c=1:f=f|0;var _=e.data("_"+t);_==null&&(_=c);var P=(f-c)*((x-s)/(h-s))+c,o=_+(P-_)/r;if(u&&n>0&&n<=l){var p=c;e.data("sens")=="back"&&(p=f,f=-f,u=X,l=b),o=i.easing[u](null,n,p,f,l)}o=Math.ceil(o*this.round)/this.round,o==_&&P==f&&(o=f),a[t]||(a[t]=0),a[t]+=o,_!=a[t]&&(e.data("_"+t,a[t]),z=!0)}},this))}if(z){if(a.z!=null){var Y=d.perspective;Y==null&&(Y=800);var g=e.parent();g.data("style")||g.data("style",g.attr("style")||""),g.attr("style","perspective:"+Y+"px; -webkit-perspective:"+Y+"px; "+g.data("style"))}a.scaleX==null&&(a.scaleX=1),a.scaleY==null&&(a.scaleY=1),a.scaleZ==null&&(a.scaleZ=1),a.scale!=null&&(a.scaleX*=a.scale,a.scaleY*=a.scale,a.scaleZ*=a.scale);var j="translate3d("+(a.x?a.x:0)+"px, "+(a.y?a.y:0)+"px, "+(a.z?a.z:0)+"px)",H="rotateX("+(a.rotateX?a.rotateX:0)+"deg) rotateY("+(a.rotateY?a.rotateY:0)+"deg) rotateZ("+(a.rotateZ?a.rotateZ:0)+"deg)",I="scaleX("+a.scaleX+") scaleY("+a.scaleY+") scaleZ("+a.scaleZ+")",k=j+" "+H+" "+I+";";this._log(k),e.attr("style","transform:"+k+" -webkit-transform:"+k+" "+A)}},this)),window.requestAnimationFrame?window.requestAnimationFrame(i.proxy(this._onScroll,this,!1)):this._requestAnimationFrame(i.proxy(this._onScroll,this,!1))}};L.init()})(jQuery);
